<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>결제 실패 - 자연치유관광 포럼</title>
    <link rel="stylesheet" href="css/style.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <header>
        <div class="header-container">
            <div class="logo">
                <h1>자연치유관광 포럼</h1>
                <p>Natural Healing Tourism Forum</p>
            </div>
            <nav>
                <ul>
                    <li><a href="index.html">홈</a></li>
                    <li><a href="seminars.html">세미나</a></li>
                    <li><a href="courses.html">강좌</a></li>
                    <li><a href="dashboard.html">내 강의실</a></li>
                    <li><a href="#" onclick="logout()">로그아웃</a></li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div class="container">
            <div class="card" style="max-width: 600px; margin: 4rem auto; text-align: center;">
                <div style="font-size: 4rem; margin-bottom: 1rem;">❌</div>
                <h2 style="color: #721c24; margin-bottom: 1rem;">결제가 실패했습니다</h2>
                <p id="failMessage" style="color: #666; margin-bottom: 2rem;">
                    결제 처리 중 문제가 발생했습니다.<br>
                    다시 시도해주세요.
                </p>
                
                <div style="background: #f8d7da; padding: 1.5rem; border-radius: 8px; margin-bottom: 2rem; text-align: left;">
                    <h4 style="color: #721c24; margin-bottom: 0.8rem;">실패 사유</h4>
                    <p id="failReason" style="color: #666; margin: 0;"></p>
                </div>
                
                <a href="courses.html" class="btn" style="margin-right: 1rem;">강좌 목록으로</a>
                <a href="javascript:history.back()" class="btn btn-outline">다시 시도</a>
            </div>
        </div>
    </main>

    <footer>
        <div class="container">
            <p>&copy; 2024 자연치유관광 포럼 (Natural Healing Tourism Forum). All rights reserved.</p>
        </div>
    </footer>

    <script src="js/config.js"></script>
    <script src="js/auth.js"></script>
    <script>
        // URL에서 실패 정보 파싱
        const urlParams = new URLSearchParams(window.location.search);
        const code = urlParams.get('code');
        const message = urlParams.get('message');
        
        if (message) {
            document.getElementById('failMessage').innerHTML = decodeURIComponent(message);
        }
        
        if (code) {
            const reasons = {
                'PAY_PROCESS_CANCELED': '사용자가 결제를 취소했습니다.',
                'PAY_PROCESS_ABORTED': '결제가 중단되었습니다.',
                'REJECT_CARD_COMPANY': '카드사에서 승인을 거부했습니다.',
                'COMMON_ERROR': '일시적인 오류가 발생했습니다.',
                'INVALID_REQUEST': '잘못된 결제 요청입니다.'
            };
            
            document.getElementById('failReason').textContent = reasons[code] || `오류 코드: ${code}`;
        } else {
            document.getElementById('failReason').textContent = '알 수 없는 오류가 발생했습니다.';
        }
    </script>
</body>
</html>
